# Gestion des Contributions - MosquÃ©e Errahma

Bienvenue dans le **Gestion des Contributions** de la **MosquÃ©e Errahma** ! ğŸ•Œâœ¨ Ce projet ambitieux a pour mission de simplifier la gestion des contributions, dons, cotisations et projets, tout en assurant un suivi efficace des adhÃ©rents et donateurs. GrÃ¢ce Ã  ce systÃ¨me, la MosquÃ©e Errahma peut se concentrer sur l'essentiel : servir la communautÃ© avec transparence et efficacitÃ©.

![MosquÃ©e Errahma Logo](images/mosque_logo.png)

## Table des MatiÃ¨res

- [Ã€ propos](#Ã -propos)
- [SchÃ©ma Global](#schema-global-du-projet)
- [FonctionnalitÃ©s](#fonctionnalitÃ©s)
- [PrÃ©requis](#prÃ©requis)
- [Installation](#installation)
- [Structure du Projet](#structure-du-projet)
- [Base de DonnÃ©es](#base-de-donnÃ©es)
- [Exemple d'Utilisation](#exemple-dutilisation)
- [Logique Applicative](#logique-applicative)
- [Workflow de Contribution](#workflow-de-contribution)
- [Auteurs](#auteurs)
- [Remerciements](#remerciements)
- [License](#license)

## Ã€ propos

Ce projet vise Ã  mettre en place un systÃ¨me complet de gestion des contributions, dons, cotisations et projets pour la **MosquÃ©e Errahma**. GrÃ¢ce Ã  ce systÃ¨me, vous pourrez :

- **Suivre les contributions** des adhÃ©rents et donateurs.
- **GÃ©rer les cotisations mensuelles** avec un historique dÃ©taillÃ©.
- **Visualiser les statistiques** via un tableau de bord interactif.
- **Afficher dynamiquement** les cotisations dans le hall d'entrÃ©e pour une transparence accrue.

L'objectif est de faciliter la gestion administrative tout en offrant une vue claire et prÃ©cise des contributions, favorisant ainsi une meilleure organisation et une communication transparente au sein de la communautÃ©.

## SchÃ©ma Global du Projet

![SchÃ©ma du Projet](images/schema.png)

> Par [GitDiagram](https://gitdiagram.com)

## FonctionnalitÃ©s

### Gestion des AdhÃ©rents et Donateurs
- **Ajout, modification et suppression** d'adhÃ©rents.
- **Gestion des cotisations mensuelles** avec historique.
- **Recherche avancÃ©e** d'adhÃ©rents par nom, email ou tÃ©lÃ©phone.

### Contributions
- **Gestion des cotisations, dons et projets**.
- **Paiements partiels ou complets**.
- **Suivi des contributions** avec dÃ©tails sur le type et le montant.

### Tableau de Bord Interactif
- **Visualisation des statistiques** : montants collectÃ©s, Ã©volution mensuelle, rÃ©partition par type de contribution.
- **Suivi des cotisations mensuelles** avec affichage des mois "payÃ©s", "partiels" ou "non payÃ©s".

### Affichage Dynamique
- **Tableau public** dans le hall d'entrÃ©e montrant les cotisations mensuelles des membres.
- **Design clair et lisible** pour une comprÃ©hension rapide des informations prÃ©sentÃ©es.

## PrÃ©requis

Avant de commencer, assurez-vous d'avoir installÃ© :

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

## Installation

1. **Clonez le dÃ©pÃ´t :**
    ```sh
    git clone https://github.com/votre-utilisateur/votre-repo.git
    cd votre-repo
    ```

2. **Lancez les services avec Docker Compose :**
    ```sh
    docker-compose up -d
    ```

3. **AccÃ©dez Ã  l'application** dans votre navigateur Ã  l'adresse [http://localhost:8080](http://localhost:8080).

## Structure du Projet

```
Directory structure:
â””â”€â”€ Tutanka01-Mosquee-Site-Don/
    â”œâ”€â”€ images/
    â”œâ”€â”€ compose.yaml
    â”œâ”€â”€ readme.md
    â””â”€â”€ src/
        â”œâ”€â”€ db.php
        â”œâ”€â”€ index.php
        â”œâ”€â”€ schema.sql
        â”œâ”€â”€ update_adherent.php
        â”œâ”€â”€ fetch_adherents.php
        â”œâ”€â”€ fetch_factures.php
        â”œâ”€â”€ fetch_adherent_details.php
        â”œâ”€â”€ fetch_member.php
        â”œâ”€â”€ styles/
        â”‚   â”œâ”€â”€ style-public-display.css
        â”‚   â”œâ”€â”€ images/
        â”‚   â”œâ”€â”€ style-index-confirmation.css
        â”‚   â””â”€â”€ style-dashboard.css
        â”œâ”€â”€ fetch_member_details.php
        â”œâ”€â”€ insert_adherent.php
        â”œâ”€â”€ libs/
        â”œâ”€â”€ fetch_adherent_history.php
        â”œâ”€â”€ delete_adherent.php
        â”œâ”€â”€ fetch_adherent_search.php
        â”œâ”€â”€ dashboard.php
        â”œâ”€â”€ public_display.php
        â””â”€â”€ insert.php

```

### Description des Fichiers

- **`compose.yaml`** : Configuration Docker Compose pour le serveur PHP.
- **`src/`** : Contient les fichiers source PHP, SQL et CSS.
  - **`index.php`** : Point d'entrÃ©e principal pour enregistrer les contributions.
  - **`dashboard.php`** : Tableau de bord pour l'administration et la visualisation des statistiques.
  - **`public_display.php`** : Affichage public des cotisations dans le hall d'entrÃ©e.
  - **`db.php`** : Gestion de la connexion Ã  la base de donnÃ©es SQLite.
  - **`libs/`** : BibliothÃ¨ques tierces (DomoPDF...).
  - **Scripts PHP** : 
    - **`insert.php`** : Insertion des contributions.
    - **`update_adherent.php`** : Mise Ã  jour des informations des adhÃ©rents.
    - **`fetch_adherents.php`** : RÃ©cupÃ©ration des adhÃ©rents.
    - **`fetch_factures.php`** : RÃ©cupÃ©ration des factures.
    - **`fetch_adherent_details.php`** : DÃ©tails d'un adhÃ©rent spÃ©cifique.
    - **`fetch_member.php`** : RÃ©cupÃ©ration des membres actifs.
    - **`fetch_member_details.php`** : DÃ©tails d'un membre actif spÃ©cifique.
    - **`insert_adherent.php`** : Insertion d'un nouvel adhÃ©rent.
    - **`fetch_adherent_history.php`** : Historique des contributions d'un adhÃ©rent.
    - **`delete_adherent.php`** : Suppression d'un adhÃ©rent.
    - **`fetch_adherent_search.php`** : Recherche avancÃ©e des adhÃ©rents.
  - **`styles/`** : Fichiers CSS pour le style de l'application.
  - **`schema.sql`** : SchÃ©ma de la base de donnÃ©es SQLite.

## Base de DonnÃ©es

Le systÃ¨me utilise **SQLite** avec trois tables principales :

1. **Adherents** :
    - **id** : Identifiant unique.
    - **nom** : Nom de l'adhÃ©rent.
    - **prenom** : PrÃ©nom de l'adhÃ©rent.
    - **email** : Email unique de l'adhÃ©rent.
    - **telephone** : TÃ©lÃ©phone de l'adhÃ©rent.
    - **date_inscription** : Date d'inscription par dÃ©faut Ã  la date courante.
    - **anonyme** : BoolÃ©en pour les contributions anonymes.
    - **donateur_temporaire** : BoolÃ©en pour les donateurs temporaires.
    - **monthly_fee** : Montant mensuel des cotisations.
    - **start_date** : Date de dÃ©but de l'adhÃ©sion.
    - **end_date** : Date de fin de l'adhÃ©sion (peut Ãªtre `NULL` pour une adhÃ©sion "Ã  vie").

2. **Contributions** :
    - **id** : Identifiant unique.
    - **id_adherent** : RÃ©fÃ©rence Ã  l'adhÃ©rent (peut Ãªtre `NULL` pour les contributions anonymes).
    - **type_contribution** : Type de contribution (`cotisation`, `don`, `projet`).
    - **montant** : Montant de la contribution.
    - **type_paiement** : Type de paiement (`espÃ¨ces`, `carte`, `virement`).
    - **mois** : Mois concernÃ© pour les cotisations.
    - **jour_paiement** : Date de paiement par dÃ©faut Ã  la date courante.
    - **heure_paiement** : Heure de paiement par dÃ©faut Ã  l'heure courante.
    - **anonyme** : BoolÃ©en pour les contributions anonymes.
    - **nom_donateur** : Nom du donateur non-adhÃ©rent.
    - **prenom_donateur** : PrÃ©nom du donateur non-adhÃ©rent.
    - **email_donateur** : Email du donateur non-adhÃ©rent.
    - **telephone_donateur** : TÃ©lÃ©phone du donateur non-adhÃ©rent.

3. **Cotisation_Months** :
    - **id** : Identifiant unique.
    - **id_adherent** : RÃ©fÃ©rence Ã  l'adhÃ©rent.
    - **year** : AnnÃ©e de la cotisation.
    - **month** : Mois de la cotisation.
    - **paid_amount** : Montant dÃ©jÃ  payÃ© pour ce mois.

## Exemple d'Utilisation

### Ajouter un AdhÃ©rent

1. **AccÃ©dez Ã  la page d'accueil**.
2. **Cliquez sur "Ajouter un adhÃ©rent"**.
3. **Remplissez le formulaire** avec les informations nÃ©cessaires.
4. **Soumettez le formulaire**.
5. **VÃ©rifiez l'ajout** dans la liste des adhÃ©rents.

### Enregistrer une Contribution

1. **AccÃ©dez Ã  la page d'accueil**.
2. **SÃ©lectionnez le type de contribution** (cotisation, don, projet).
3. **Remplissez le formulaire** avec les dÃ©tails de la contribution.
4. **Soumettez le formulaire**.
5. **Confirmez l'enregistrement** via la page de confirmation.
6. **Telechargez le reÃ§u** si nÃ©cessaire.

### Visualiser les Statistiques

1. **AccÃ©dez au tableau de bord** via le lien fourni aprÃ¨s une contribution ou directement depuis le menu.
2. **Consultez les diffÃ©rents onglets** pour voir les statistiques globales, les cotisations, les dons et les projets.
3. **Analysez les graphiques interactifs** pour une meilleure comprÃ©hension des donnÃ©es.

## Logique Applicative

### Gestion des Cotisations Mensuelles
- **Montant Mensuel PersonnalisÃ©** : Chaque adhÃ©rent dispose d'un montant mensuel de cotisation unique.
- **RÃ©partition Automatique** : Lors d'une contribution, le systÃ¨me calcule automatiquement les mois "payÃ©s", "partiels" ou "non payÃ©s".
- **Cumul des Cotisations** : Les cotisations peuvent couvrir plusieurs mois en fonction du montant versÃ©.

### Paiements Partiels
- **FlexibilitÃ© FinanciÃ¨re** : Si une cotisation est insuffisante pour couvrir un mois complet, le systÃ¨me applique la somme aux mois partiels.
- **Gestion SimplifiÃ©e** : Les adhÃ©rents peuvent effectuer des paiements en plusieurs fois sans complications.

### Recherche et Historique
- **Recherche AvancÃ©e** : Trouvez rapidement un adhÃ©rent par nom, email ou tÃ©lÃ©phone.
- **Historique Complet** : Consultez l'historique des contributions d'un adhÃ©rent avec tous les dÃ©tails.

### Tableau de Bord
- **Statistiques Globales** : Visualisez les montants collectÃ©s, l'Ã©volution mensuelle et la rÃ©partition par type de contribution.
- **Cotisations Mensuelles** : Suivez les mois "payÃ©s", "partiels" ou "non payÃ©s" de chaque adhÃ©rent.

### Affichage Public
- **Transparence et FiertÃ©** : Un tableau rÃ©capitulatif des cotisations visible dans le hall d'entrÃ©e pour une transparence accrue.
- **Design Ã‰lÃ©gant** : PrÃ©sentation claire et professionnelle des informations essentielles.

## Workflow de Contribution

### 1. Ajout d'un AdhÃ©rent
1. **Ouvrez la fenÃªtre modale** "Ajouter un nouvel adhÃ©rent".
2. **Remplissez le formulaire** (email unique, montant mensuel, etc.).
3. **Soumettez le formulaire via AJAX**.
4. **Les informations sont ajoutÃ©es** Ã  la table `Adherents`.
5. **Les cotisations mensuelles** sont automatiquement gÃ©nÃ©rÃ©es dans `Cotisation_Months` si nÃ©cessaire.

### 2. Enregistrement d'une Contribution
1. **SÃ©lectionnez le type de contribution** (cotisation, don, projet).
2. **Saisissez le montant et les dÃ©tails**.
3. **Soumettez le formulaire**.
4. **Les donnÃ©es sont insÃ©rÃ©es** dans la table `Contributions`.
5. **RÃ©partition automatique** des cotisations sur les mois applicables si c'est une cotisation.

## Auteurs

- [**El Akhal El Bouzidi Mohamad**](https://github.com/tutanka01)

## License

Ce projet est sous licence [MIT](LICENSE). La transparence et la libertÃ© sont au cÅ“ur de nos valeurs !

---

*P.S. : Si vous rencontrez des problÃ¨mes, avez des suggestions ou souhaitez contribuer, n'hÃ©sitez pas Ã  ouvrir une issue ou Ã  soumettre une pull request. Ensemble, nous pouvons amÃ©liorer ce systÃ¨me pour le bien de toute la communautÃ©.*